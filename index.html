<head>

<style href="homepage.css"></style>

<script>
var OWMurl="HTTP://api.openweathermap.org/data/2.5/weather?APPID=1f1cbdded940419b5f6d6b2d5d33c057&units=metric&id=3333207"
var baseImageUrl = "http://openweathermap.org/img/w/10d.png"

var ms = 1000*60*5;

function GetWeather(){
	const Http = new XMLHttpRequest();
	Http.onreadystatechange=GotWeather;
	Http.open("GET", OWMurl);
	Http.send(null);
}

function GotWeather(Http){  
  var w=JSON.parse(Http.target.responseText);

  document.getElementById("weather").innerHTML=`
     <img class="weathericon" src="http://openweathermap.org/img/w/${w.weather[0].icon}.png" />
     <span class="weatherdescription" title="${titleCase(w.weather[0].description)}">${titleCase(w.weather[0].main)}</span><br>
     Humidity: ${w.main.humidity}%<br>
     Cloud Cover: ${w.clouds.all}%<br>
     Wind: ${Math.floor(w.wind.speed+0.5)} mph <span class="weatherwinddir" style="-webkit-transform: rotate(${w.wind.deg}deg)">&#8595</span><br>
     Temp: ${Math.floor(w.main.temp+0.5)} &#176C <span class="weatherminmaxtemp">(${Math.floor(w.main.temp_min+0.5)} - ${Math.floor(w.main.temp_max+0.5)})</span><br> 
     Sunrise: ${timeConverter(w.sys.sunrise)} &nbsp; &nbsp; &nbsp; &nbsp; Sunset: ${timeConverter(w.sys.sunset)}<br>`; 
     
     
};

function titleCase(str) {
  return str.toLowerCase().split(' ').map(function(word) {
    return (word.charAt(0).toUpperCase() + word.slice(1));
  }).join(' ');
}

function timeConverter(UNIX_timestamp){
  var t = new Date(UNIX_timestamp * 1000);
  t.setSeconds(t.getSeconds() + 30);
  var hour = t.getHours();  if(hour<10){hour='0' + hour};  
  var min = t.getMinutes(); if(min <10){min ='0' + min};  
  return hour + ':' + min;
}

GetWeather();
setInterval(GetWeather, ms)


</script>
</head>


<body>
<div class="gridcontainer">

<a class="griditem" href="https://en.wikipedia.org/wiki/Main_Page">
  <img src="file://E:/7 Folder/My Documents/My Settings/Wikipedia.bmp" />
</a>

<a class="griditem" href="https://www.google.co.uk">
  <img src="file://E:/7 Folder/My Documents/My Settings/Google.bmp" />
</a>

<a class="griditem" href="https://www.google.co.uk/maps?ie=UTF8&ll=51.567254,-1.79163&spn=0.089845,0.235691&z=13">
  <img src="file://E:/7 Folder/My Documents/My Settings/map.bmp" />
</a>

<div class="griditemnot"> </div>

<a class="griditem" href="https://www.bbc.co.uk/weather/2636389" >
<div id="weather">
</div>
</a>

<div class="griditemnot"></div>

<a class="griditem" href="https://www.hotmail.com">
  <img src="file://E:/7 Folder/My Documents/My Settings/Hotmail.bmp" />
</a>

<a class="griditem" href="https://www.youtube.com">
  <img src="file://E:/7 Folder/My Documents/My Settings/youtube.bmp" />
</a>

<a class="griditem" href="https://www.bbc.co.uk/news">
  <img src="file://E:/7 Folder/My Documents/My Settings/bbc.bmp" />
</a>


</div>
</body>
